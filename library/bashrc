# note ssh will fail if bashrc writes to stdout

export TZ=UTC
export TIME_STYLE=long-iso
umask 0007
export HOME=$(/usr/local/bin/home)
export EDITOR=emacs
alias emacs="emacs --title='$(/usr/local/bin/user-subu $(/user/local/bin/user))'"
export PS_FORMAT=user:15,pid,%cpu,%mem,vsz,rss,tty,stat,start,time,command

# user $PWD instead of \w or it will prefix ~ which confuses dirtrack when the user is changed using su
if [[ -z "$PROJECT" ]]; then
  export PS1='\n$(/usr/local/bin/Z)\n\u@\h§$PWD§\n> '
else
  export PS1='\n$(/usr/local/bin/Z)[$PROJECT]\n\u@\h§$PWD§\n> '
fi
export PS2='>>'



# Make jupyterlab happy
#
#  export PATH=~/bin:~/.local/bin:"$PATH"
  # export PATH=~/bin:~/projects/share:"$PATH"

if [[ $HOME == "/home/Thomas/admin" ]]; then
  export PATH=~/user/executable:/home/Thomas/repo/user/subu/executable:"$PATH"
  # No sound in subu shells without this:
  # Seems it belongs somewhere other than .bashrc, but it does work here
  # /etc/pulse/default.pa did not work.
  pactl load-module module-native-protocol-tcp
fi
if [[ $HOME != "/home/Thomas/admin" ]]; then
   # suppresses the no at bridge error .. no one seems to know why ...
  export NO_AT_BRIDGE=1
fi

if [[ $HOME == "/home/lfs" ]]; then
  export PATH=~/user/LFS/executable:~/user/resource/executable:"$PATH"
fi

if [[ $HOME == "/home/Thomas/repo" ]]; then
  export PATH=~/user/resource/executable:"$PATH"
fi

#eval $(ssh-agent)
#ssh-add ~/.ssh/key
#export NO_AT_BRIDGE=1

if [ -n "$INSIDE_EMACS" ]; then 
  echo Hello Emacs
  echo $PATH
fi


